
Bugs reported after the release of 3.7.0
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This file lists bugs that were reported after 3.7.0 was released, both
in 3.7.0 and trunk, and that have not been closed.  Bugs that have
been closed as "fixed" are listed in the top level NEWS file instead.
In other words they get listed here first and moved to NEWS if they
get fixed.

-- reenable amd64_toIR.c commented out insns
-- amd64 toIR memcheck icc -O3 -mAVX probs?
-- OSX 10.8 (alignment) and XCode 4.3 (build, link) problems
-- add arm stack-scan hacks?
-- add allocator-mismatch checking?

284004  Application under test hangs after call to __posix_spawn (Darwin)
  open, not started

284540  Memcheck shouldn't count suppressions matching
        still-reachable allocations
  wishlist, w/patch, unclear if important

284904  Avoid cycles by disabling inclusive costs for cycles?
  wishlist

285780  Nice to be able to display (animate) movement of variables through caches
  wishlist

286769  replace __intel_new_memcpy with valgrind's memcpy
  not started

286849  Interceptors for new/delete on Darwin were erroneously commented
        out in r12043
  **potentially 3.8.0

286864  strlen function redirection error
  **probably invalid

286917  disInstr(arm): unhandled instruction: QADD
  **potentially 3.8.0

287175  ARM: scalar VFP fixed-point VCVT instructions not handled
  **potentially 3.8.0

288099  valgrind should print arguments/return values of functions in stack
  wishlist

287862  MPI_IN_PLACE not supported for MPI collect
  libmpiwrap.c problem; low prio

288274  Aborts at illegal instruction 0x48 0xF 0x5A 0x7 0x48 0xF
  == 278744 REX.W CVTPS2PD
  **potentially 3.8.0 (redundant REX prefix)

288298  unhandled syscall shm_unlink
  OSX.  uninvestigated.

288363  valgrind: m_libcfile.c:73 (vgPlain_safe_fd): Assertion
        'newfd >= VG_(fd_hard_limit)' failed.
  OSX weirdness; uninvestigated

288756  add '-x' to strip when stripping dynamic libraries on OSX
  OSX.  low prio

289360  parse_type_DIE confused by DW_TAG_enumeration_type
  low prio; --read-var-info=yes problem; OP queried

289470  Loading of large Mach-O thin binaries fails.
  **potentially 3.8.0; w/ patch; apparently harmless; easy fix

289578  Backtraces with unwind tables (=without debug symbols)
        using offline symbol resolving
  wishlist

289584  Unhandled instruction: 0xF 0x29 0xE5 (MOVAPS)
  movaps reg,reg (w/ patch)
  **potentially 3.8.0

289836  Unhanded instructions mfatbu and mfatbl
  ppc e500 insns

289839  s390x:Provide support for unicode conversion instruction
        like cu21,cu12,cu42 etc.
  s390  This will not be ready for 3.8.0

289912  link_tool_exe_darwin should not use relative paths
  unsupported build configuration; low prio

290006  memcheck doesn't mark %xmm as initialized after "pcmpeqw %xmm %xmm"
  easy fix; w/ patch
   **potentially 3.8.0

290061  pie elf always loaded at 0x108000
  w/ patch; looks OK; easy fix ?
  not sure this wouldn't break something else -- needs looking into

290066  Warning messages from libraries with Valgrind 3.7.0
  ppc elfery wierdness
  **revisit -- related to some other bug re ELF problems (296318)?

290384  Valgrind does not show line numbers
  on 32 bit FC16
  **uninvestigated

290673  wine+valgrind: failed to start tool 'memcheck' for platform
        'x86-linux': No such  file or directory
  **probably invalid; build config problem?

291310  FXSAVE instruction marks memory as undefined on amd64
  x86 vs amd64 inconsistency?
  **probably easy to fix; low prio

291924  vex x86->IR: unhandled instruction bytes: 0x66 0xF 0x38 0x31
  invalid (SSE4) (WONTFIX)

292281  Not supported LL cache size of AMD Opteron 6176
  hmm, more cache size kludgery required
  **need access to the machine to fix

278313  Fedora 15/x64: err read debug info with --read-var-info=yes flag
  seems complex; is reopened
  **queried OP

293855  vex amd64->IR: 0x2F 0x55 0x73 0x65 0x72 0x73 0x2F 0x6A
  some problem with interceptors on Helgrind/OSX 

294065  valgrind running wine does not find pdb file because of wrong
        path to egrep
  w/ somewhat dodgy patch

294147  Exception in thread "main" java
  probably invalid
  not sure what is going on here

294285  --partial-loads-ok does not work for 16-byte SSE loads
  true

294454  delphi uses 16-bit addressing in the TEB (%fs)
  obscure (16 bit (0x67 ?) insns in 32 bit mode)

294523  --partial-loads-ok=yes causes false negatives
  **fixed I think -- should close

294552  svn trunk compilation stuck in mig
  XCode 4.3 problem?
  no action so far
  **possible OSX 10.8 issue

294861  ./configure fails to locate Boost (located in /usr/local)
  low prio

295053  Valgrind fails to load some x86_64 Mac OS Lion executables
  OSX
  **possible 3.8.0, med prio

295084  Hard-coded /usr/include
  OSX, XCode 4.3 problem

251569  rdtscp not supported: vex amd64->IR: 0xF 0x1 0xF9 0x8B 0x4C 0x24
  has doesn't-really-look-right patch 

295403  Memory access below SP with some STRD instructions.
  ARM, fiddly to fix/verify

295427  building i386 support with clang on darwin11 requires
        -new_linker linker option
  OSX, XCode 4.3, 
  **has plausible looking patch though (low risk)

295472 "executable has wrong endian-ness" when target executable has
  correct endianess
  cross-compiling x86->ppc32 weirdness

295514  unhandled instruction bytes : 0x66 0x9C (pushfw on x86_64)
  not high prio
  **possible 3.8.0 (easy to fix?)

295590  Helgrind: hg_main.c:2298 (evh__HG_PTHREAD_COND_WAIT_POST):
  Assertion 'cvi->nWaiters > 0' failed.
  **possible 3.8.0

295617  ARM - Add some missing syscalls
  **possible 3.8.0, needs landing

295808  vex amd64->IR: 0xF3 0xF 0xBC 0xC0 0x48 0x1 0xD0 0x48 (TZCNT)
  **possible 3.8.0 ?

295974  vex-x86 omits some SSE4.1 opcodes such as PEXTRD
  **check before 3.8.0; maybe some 64-bit insns missing?  OP queried

296166  Add support for ARM in ptrcheck
  **no patch yet

296229  Linux user input device ioctls missing wrappers
  **possible 3.8.0, but wrong patch; OP queried

296308  helgrind tests fail on Linux/x86 due to clone syscall
  missing unwind info
  **possible 3.8.0; has low risk patch

296311  Wrong stack traces due to -fomit-frame-pointer (x86)
  **not sure what to do about this.  Is it serious?

296318  Debug info improvements (more than one rx/rw mapping)
  **this is probably important for 3.8.0  

296480  valgrind hangs early when run on Python
  OSX.  Not started.

--- JRS got this far, tidying up, 4 July 2012.

296577] New: vex x86->IR: unhandled instruction bytes: 0x66 0xF 0x3A 0x17
296578] New: vex amd64->IR: unhandled instruction bytes: 0x60 0x0 0x0 0x0 0x0 0x0 0x0 0x0
296792] New: [PATCH] valgrind 3.7.0: add SIOCSHWTSTAMP (0x89B0) ioctl wrapper
296947] New: vex amd64->IR: unhandled instruction bytes: 0x1F 0x7 0x0 0x0 0x0 0x0
297407] New: Failed reading debug information for Fortran codes; invalid cuOff
297701] New: Another alias for strncasecmp_l in libc-2.13.so
297911] New: valgrind does not report 'invalid write' when using APIs for custom memory allocators.
 298097] New: on ppc32 (e500mc core) target, valgrind report a app a mem error but the app is good to me.
298227] New: valgrind unhandled instruction (vex amd64->IR: unhandled instruction bytes: 0xC5 0xF8 0x57 0xC0 0x48 0xC7 0x43 0x58)
298281] New: wcslen causes false(?) uninitialised value warnings
298335] New: Valgrind crashes after "vex amd64->IR: unhandled instruction bytes: 0xC5 0xF9 0x57 0xC0 0x48 0x8B 0x35 0x3"
298546] New: wishlist: track virtual memory leaks due to mmap without munmap
298870] New: No support for DW_TAG_partial_unit
298905] New: argv / argc to be changed to non valgrind values.

-- Sun 29 Apr 2012, near midnight.

299629] New: dup3() syscall (358) support is missing for ARM
300102] New: memcheck tester
300140] New: ARM - Missing (T2) SMMUL
300195] New: read_elf_debug_info() should accept 'executable' .got sections

301011] New: vex x86->IR: unhandled instruction bytes: 0xF3 0xF 0xBC 0xDE
301204] New: infinite loop in canonicaliseSymtab with ifunc symbol
301265] New: add x86 support to Android build
301269] New: optimize Memcheck to use light tracking for trusted code
301280] New: vex amd64->IR: unhandled instruction bytes: 0xF 0xB 0x55 0x48 0x89 0xE5 0x41 0x56
301281] New: valgrind hangs on OS X when the process calls system()
301336] New: Valgrind vassert(0) in dis_neon_data_2reg_misc()
301830] New: mtV : improve Valgrind so that it runs multiple threads in parallel
301902] New: vex amd64->IR: unhandled instruction bytes: 0xF 0xB 0xF 0x1F 0x0 0x40 0x38 0xFE
301922] New: gcc -O2 problem with SSE optimization?
301967  unhandled instruction bytes 0xC5 0xF9 0x6E 0x40 in /lib32/ld-2.14.1.so
        == 273475 (canonical avx)
302234] New: fesetround() function does not affect FPU calculations
302271] New: Bug with Callgrind dump-instr and Trace-children
302287] New: Unhandled movbe instruction on Atom processors
302370] New: The nmadd, fnmsub, fnmadds, fnmsubs instructions always negate the result even when the result is QNAN or SNAN.
302578] New: Unrecognized isntruction 0xc5 0x32 0xc2 0xca 0x09 vcmpngess
302630] New: Memcheck on ultithreaded program fails with Assertion 'sizeof(UWord) == sizeof(UInt)' failed in m_syscall.c
302700] New: Assertion 'srcix >= 0 && srcix < VG_(sizeXA)(srcxa)' failed.
302800] New: valgrind change the operator new's alloctor into system's

-- Sat 30 June 2012, near midnight.
